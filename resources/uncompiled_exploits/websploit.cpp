#include "../../Exploit.h"
#include <iostream>
#include <thread>
#include <chrono>

class Websploit : public Exploit{
private:
    struct RADDR{
      std::string Name = "Remote Address";
      std::string Description = "The IP address of your target";
      std::string SelectedOption;
    };

    struct RSYS{
      std::string Name = "Remote System";
      std::string Description = "The operating system of your target machine";
      std::string SelectedOption;
      std::vector<std::string> PresetOptions = {
        "WIN7",
        "WIN10",
        "WIN11"
      };
    };

    RADDR RADDR;
    RSYS RSYS;
public:
    std::string getName() const override {return "Websploit"; }
    void execute() override { 
        std::cout << "[*] Accessing web framework...\n"; 
        std::this_thread::sleep_for(std::chrono::seconds(1));
        std::cout << "[*] Starting exploit\n"; 
        std::this_thread::sleep_for(std::chrono::seconds(1));
        std::cout << "--- Execution Complete ---\n"; 
    }
    
    std::vector<std::string> instructions() const override{
      std::vector<std::string> messageData = {
        "@GREEN@Success@WHITE@ Message complete\n",
        "@GREEN@Success@WHITE@ Message sent to " + RSYS.Name + "\n"
      };

        return messageData;
    }

    void options() override{
        
        std::cout << "REMOTE ADDRESS: " << RSYS.Name << std::endl;
        std::cout << "REMOTE SYSTEM: " << RSYS.Name << std::endl;
    }

    void set() {

    }

    double incomeMultiplier = 0.10;
};

extern "C" __declspec(dllexport) Exploit* create_exploit(){
    return new Websploit();
}
